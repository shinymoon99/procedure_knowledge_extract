{"NF 向 NRF 发送 NnrfNFManagementNFRegisterRequest 消息 请求 注册": [["NF", "向", "NRF", []], ["NF", "发送", "NnrfNFManagementNFRegisterRequest消息", [["向", "NRF"]]], ["NF", "请求", "注册", []]], "NRF 处理 NF 的 注册 请求": [["NRF", "处理", "NF的注册请求", []]], "并 进行 相应 的 检查": [["", "进行", "相应的检查", []]], "通过 后 保存 NF / NFSProfile 记录": [["", "保存", "NF/NFSProfile记录", []]], "并 返回 应答": [["", "返回", "应答", []]], "NRF 向 NF 返回 NnrfNFManagementNFRegisterResponse 消息": [["NRF", "向", "NF", []], ["NRF", "返回", "NnrfNFManagementNFRegisterResponse消息", [["向", "NF"]]]], "已 注册 的 NF / NFS 向 NRF 发送 NnrfNFManagementNFUpdateRequest 消息 请求 更新 信息": [["已注册的NF/NFS", "向", "NRF", []], ["已注册的NF/NFS", "发送", "NnrfNFManagementNFUpdateRequest消息", [["向", "NRF"]]], ["已注册的NF/NFS", "请求", "更新信息", []]], "请求 消息 中 只 携带 待 更新 的 NF / NFSProfile 和 对 这些 属性 信息 的 更新 操作 （ 增加 / 删除 / 替换": [["请求消息", "携带", "待更新的NF/NFSProfile和对这些属性信息的更新操作（增加/删除/替换", []]], "NRF 处理 NF / NFS 更新 请求": [["NRF", "处理", "NF/NFS更新请求", []]], "NRF 向 NF 发送 NnrfNFManagementNFUpdateResponse 消息": [["NRF", "向", "NF", []], ["NRF", "发送", "NnrfNFManagementNFUpdateResponse消息", [["向", "NF"]]]], "已 注册 的 NF 向 NRF 发送 NnrfNFManagenentNFUpdateRequest 消息": [["已注册的NF", "向", "NRF", []], ["已注册的NF", "发送", "NnrfNFManagenentNFUpdateRequest消息", [["向", "NRF"]]]], "请求 消息 包含 NF 状态 和 对应 替换 操作": [["请求消息", "包含", "NF状态和对应替换操作", []]], "NRF 处理 NF 更新 请求 （ 心跳 消息": [["NRF", "处理", "NF更新请求（心跳消息", []]], "NRF 向 NF 发送 NnrfNFManagenentNFupdateResponse 消息": [["NRF", "向", "NF", []], ["NRF", "发送", "NnrfNFManagenentNFupdateResponse消息", [["向", "NF"]]]], "NF 向 NRF 发送 NnrfNFManagementNFDeregisterRequest 消息 请求 去 注册": [["NF", "向", "NRF", []], ["NF", "发送", "NnrfNFManagementNFDeregisterRequest消息请求", [["向", "NRF"]]], ["NF", "请求", "去注册", []]], "只 需 携带 该 NF 已 生成 的 nfInstanceID": [["", "只需携带", "该NF已生成的nfInstanceID", []]], "不 需要 携带 NF / NFSProfile": [["", "不需要携带", "NF/NFSProfile", []]], "NRF 收到 去 注册 请求 后亚 抟 该 nfInstanceID 对应 的 记录": [["NRF", "收到", "去注册请求", []], ["NRF", "抟", "该nfInstanceID对应的记录", []]], "删除 该 NF 及 所 关联 的 所有 NFSProfile": [["", "删除", "该NF及所关联的所有NFSProfile", []]], "NRF 向 该 NF 返回 NnrfNFManagementNFDregisterResponse 应答": [["NRF", "向", "该NF", []], ["NRF", "返回", "NnrfNFManagementNFDregisterResponse应答", [["向", "该NF"]]]], "消息 半 例如 下": [["消息", "例如", "下", []]], "不 携带 信元": [["", "不携带", "信元", []]], "NF 向 NRF 发送 状态 订阅 更新 请求 消息": [["NF", "向", "NRF", []], ["NF", "发送", "状态订阅更新请求消息", [["向", "NRF"]]]], "携带 subscriptionId": [["", "携带", "subscriptionId", []]], "validityTime 新 的 订阅 有效 时长 和 管换 操作": [["", "操作", "", []]], "不 更新 其他 属性": [["", "不更新", "其他属性", []]], "NRF 处理 订阅 有效 时 长 刷新": [["NRF", "处理", "订阅有效时长刷新",[]]], "NRF 向 NF 发送 响应": [["NRF", "向", "NF", []], ["NRF", "发送", "响应", [["向", "NF"]]]], "状态 订阅 更新 成功 返回 2000K": [["状态订阅", "更新", "成功", []], ["NRF", "返回", "2000K", []]], "NF 向 NRF 发送 NnrfNFDiscoveryRequest 消息 请求 可用 服务": [["NF", "向", "NRF", []], ["NF", "发送", "NnrfNFDiscoveryRequest消息", [["向", "NRF"]]], ["NF", "请求", "可用服务", []]], "消息 中 携带 targetnftype 、 requesternftype 和 特定 条广": [["消息", "携带", "targetnftype、requesternftype和特定条广", []]], "NRF 结合 期望 的 NF / NFS 的 注册 信息 和 NF 的 类型 进行 NF / NFS 访问 授权 控制": [["NRF", "结合", "期望的NF/NFS的注册信息和NF的类型", []], ["NRF", "进行", "NF/NFS访问授权控制", [["结合", "期望的NF/NFS的注册信息和NF的类型"]]]], "决定 NF 是否 允许 访问 期望 的 NFS": [["", "决定", "NF是否允许访问期望的NFS", []]], "NRF 向 请求 方 NF 发送 NnrfNFDiscoveryResponse 消息": [["NRF", "向", "请求方NF", []], ["NRF", "发送", "NnrfNFDiscoveryResponse消息", [["向", "请求方NF"]]]], "NF 服务 消费者 携带 granttype 、 nfInstanceId 和 scope 等 属性 向 NRF 发起 NnrfAccessTokenRequest 请求": [["NF服务消费者", "携带", "granttype、nfInstanceId和scope等属性", []], ["NF服务消费者","向","NRF"],["NF服务消费者", "发起", "NnrfAccessTokenRequest请求", [["向","NRF"]]]], "NRF 根据 NF 服务 消费者 的 nfInstanceId 和 NF 服务提供者 的 NF / NFS 访问 授权 控制 等 共同 生成 AccessToken": [["NRF", "根据", "NF服务消费者的nfInstanceId和NF服务提供者的NF/NFS访问授权控制等", []], ["NRF", "共同生成", "AccessToken", [["根据", "NF服务消费者的nfInstanceId和NF服务提供者的NF/NFS访问授权控制等"]]]], "AccessToken 包 包含 AccessTokenCLaims （ NF 服务 消费者 、 NF 服务提供者 和 NRF 的 InstanceID": [["AccessToken包", "包含", "AccessTokenCLaims（NF服务消费者、NF服务提供者和NRF的InstanceID", []]], "可以 访问 的 NFS 名称 等 ）": [["", "名称", "等）", []]], "AccessToken 过期 时间 和 NF 服务 消费者 可以 访问 的 NFS 名称 等": [["消费者", "访问", "的NFS", []], ["消费者", "名称", "等", []]], "NRF 将 生成 的 AccessToken 通过 NnrfAccessTokenResponse 消息 返回 给 NF 服务 消费者": [["NRF", "将", "生成的AccessToken", []], ["NRF", "通过", "NnrfAccessTokenResponse消息", []], ["NRF", "返回给", "NF服务消费者", [["将", "生成的AccessToken"],["通过", "NnrfAccessTokenResponse消息"]]]], "UE 发送 ANMessage （ 包括 AN 参数 和 RegistrationRebuest 消息 ） 给 （ R ） AN": [["UE", "发送", "ANMessage（", []], ["UE", "包括", "AN参数和RegistrationRebuest消息）", []], ["UE", "给", "（R）AN", []]], "其中 RegistrationRequest 消息 中 Registrationtype 为 initialreqistration": [["Registrationtype", "为", "initialreqistration", []]], "指示 UE 需": [["", "指示", "UE需", []]], "要 进行 初始 注册 （ 如": [["", "进行", "初始注册（如", []]], "UE 目前 处于 RMDEREGISTERED 状态 ）": [["UE", "处于", "RMDEREGISTERED状态）", []]], "如果 （ R ） AN 是 NGRAN": [["（R）AN", "是", "NGRAN", []], ["（R）AN", "是", "NGRAN", []]], "则 AN 消息 中 AN 参数 包括 5GSTMSI 或 GUAMI 、 请求 的 NSSAI 、 选择 的 PLMN 、 RRC 建立 原因 值": [["AN参数", "包括", "5GSTMSI或GUAMI、请求的NSSAI、选择的PLMN、RRC建立原因值", []]], "如果 AN 消息 中未 携带 5GSTMSIorGUAMI": [["AN消息", "携带", "5GSTMSIorGUAMI", []], ["AN消息", "携带", "5GSTMSIorGUAMI", []]], "或者 5GSTMSIorGUAMI 不能 指示 一个 合法 的 AMF 时": [["5GSTMSIorGUAMI", "不能指示", "一个合法的AMF", []], ["5GSTMSIorGUAMI", "不能指示", "一个合法的AMF", []]], "（ R ） AN 根据 RAT 和 清求 的 网络 切片 标识 （ NSSAI ） 选择 AMF": [["（R）AN", "根据", "RAT和清求的网络切片标识（NSSAI）", []], ["（R）AN", "选择", "AMF", [["根据", "RAT和清求的网络切片标识（NSSAI）"]]]], "如果 UE 是 连接 态时": [["UE", "是", "连接态时", []]], "RAN 根据 已有 连接": [["RAN", "根据已有", "连接", []], ["RAN", "根据已有", "连接", []], ["RAN", "根据已有", "连接", []]], "将 消息 直接 转发 到 对应 的 AMF 上": [["", "转发到", "对应的AMF上", []], ["", "转发到", "对应的AMF上", []], ["", "转发到", "对应的AMF上", []]], "如果 （ R ） AN 不能 选择 合适 的 AMF": [["AN", "选择", "合适的AMF", []]], "则 将 注册 请求 转发给 （ R ） AN 中 已 配置 的 defaultAMF 进行 AMF 选择": [["", "将", "注册请求", []], ["", "转发给", "（R）AN中已配置的defaultAMF", []], ["", "进行", "AMF选择", []]], "（ R ） AN 将 N2Message （ N2 参数": [["（R）", "AN", "将N2Message（N2参数", []], ["（R）", "AN", "将N2Message（N2参数", []], ["（R）", "AN", "将N2Message（N2参数", []]], "ReqistrationRequest ） 转发给 AMF ・ 消息 中 包括 N2 参数 、 注册 消息 （ 步骤 1 中 的 ） 、 UE 的 接入 选择 和 PDU 会话 选择 信息 以及 UE 上下文 请求": [["中", "包括", "N2参数、注册消息（步骤1中的）、UE的接入选择和PDU会话选择信息以及", []], ["中", "UE", "上下文请求", []]], "N2 参数 包括 选择 的 PLMNID 、 位置 信息 和 与 UE 所在 小区 相关 的 小区 标识": [["N2参数", "包括", "选择的PLMNID、位置信息和与UE所在小区相关的小区标识", []]], "可 选 ： 如果 AMF 发生 改变": [["AMF", "发生", "改变", []], ["AMF", "发生", "改变", []]], "新侧 AMF 会 向 老侧 AMF 发送 NamfCommunicationUEContextTransferrequest 消息 获取 用户 上下文": [["新侧AMF", "会向", "老侧AMF", []], ["新侧AMF", "发送", "NamfCommunicationUEContextTransferrequest消息", []], ["新侧AMF", "获取", "用户上下文", []], ["新侧AMF", "会向", "老侧AMF", []], ["新侧AMF", "发送", "NamfCommunicationUEContextTransferrequest消息", []], ["新侧AMF", "获取", "用户上下文", []]], "老侧 AMF 回复 NamfCommunicationUEContextTransferresponse 消息": [["老侧AMF", "回复", "NamfCommunicationUEContextTransferresponse消息", []], ["老侧AMF", "回复", "NamfCommunicationUEContextTransferresponse消息", []]], "携带 用户 的 上下文 信息": [["", "携带", "用户的上下文信息", []], ["", "携带", "用户的上下文信息", []]], "如果 UE 没有 提供 SUCI": [["UE", "没有提供", "SUCI", []]], "并且 从 老侧 AMF 也 没有 获取 到 用户 上下文": [["", "从", "老侧AMF", []], ["", "没有获取", "到用户上下文", [["从", "老侧AMF"]]]], "新侧 AMF 会 发起 IdentityRequest 给 UE": [["新侧AMF", "发起", "IdentityRequest给UE", []]], "向 UE 获取 SUCI": [["", "向", "UE", []], ["", "获取", "SUCI", [["向", "UE"]]]], "UE 回复 IdentityResponse": [["UE", "回复", "IdentityResponse", []]], "携带 sUCI": [["", "携带", "sUCI", []]], "AMF 根据 SUPI 或者 SUCI 选择 一个 AUSF 为 UE 进行 鉴权": [["AMF", "根据", "SUPI或者SUCI", []], ["AMF", "选择", "一个AUSF", [["根据", "SUPI或者SUCI"]]], ["AMF", "为", "UE", []], ["AMF", "进行", "鉴权", ["为", "UE"]]], "执行 鉴权 过程": [["", "执行", "鉴权过程", []]], "详情 查看 鉴权 流程": [["", "查看", "鉴权流程", []]], "新侧 AMF 给 老侧 AMF 回复 NamfCommunicationRegistrationCompleteNotify 消息": [["AMF", "给", "老侧AMF", []], ["AMF", "回复", "NamfCommunicationRegistrationCompleteNotify消息", [["给", "老侧AMF"]]]], "通知 老侧 AMF": [["", "通知", "老侧AMF", []], ["", "通知", "老侧AMF", []]], "UE 已经 在 新 的 AMF 上 完成 注册": [["UE", "在", "新的AMF", []], ["UE", "完成", "注册", [["在", "新的AMF"]]]], "如果 AMF 本地 策略 需要 发起 PEI 认证": [["AMF本地策略", "需要发起", "PEI认证", []]], "且 新侧 AMF 从 UE 和 老侧 AMF 的 上下文 中 都 没有 获取 到 PEI （ PermanentEquipmentIdentifier ）": [["新侧AMF", "从", "UE和老侧AMF的上下文中", []], ["新侧AMF", "都没有获取到", "PEI（PermanentEquipmentIdentifier）", [[ "从", "UE和老侧AMF的上下文中"]]]], "则 新侧 AMF 给 UE 发送 IdentityRequest 消息 获取 PEI": [["新侧AMF", "给", "UE", []], ["新侧AMF", "发送", "IdentityRequest消息", [["给", "UE"]]], ["新侧AMF", "获取", "PEI", []]], "UE 回复 IdentityResponse 携带 PEI 给 AMF": [ ["UE", "给", "AMF", []], ["UE", "回复", "IdentityResponse", [["给", "AMF"]]], ["IdentityResponse", "携带", "PEI", []]], "AMF 发起 N5geirEquipmentIdentityCheckGet 流程": [["AMF", "发起", "N5geirEquipmentIdentityCheckGet流程", []]], "发起 MEidentity 的 核查": [["", "发起", "MEidentity的核查", []]], "AMF 基于 SUPI 选择 UDM": [["AMF", "基于", "SUPI", []], ["AMF", "选择", "UDM", []], ["AMF", "基于", "SUPI", []]], "14a ~ 14c": [], "若新侧 AMF 是 初始 注册 的 AMF 或者 AMF 没有 UE 合法 的 上下文": [["AMF", "是", "初始注册的AMF", []], ["AMF", "没有", "UE合法的上下文", []]], "AMF 向 UDM 发起 NudmUECMRegistration 进行 注册": [["AMF", "向", "UDM", []], ["AMF", "发起", "NudmUECMRegistration", [["向", "UDM"]]], ["AMF", "进行", "注册", []]], "并 通过 NudnSDMGet 获取 签约 数据": [["", "通过", "NudnSDMGet", []], ["", "获取", "签约数据", []]], "AMF 向 UDM 发送 NudnSOYLSubscribe 订阅 签约 数据 变更 通知 服务": [["AMF", "向", "UDM", []], ["AMF", "发送", "NudnSOYLSubscribe", [["向", "UDM"]]], ["AMF", "订阅", "签约数据变更通知服务", []]], "当 订阅 的 签约 数据 周期性 注册 定时器 发生 变更 时": [["订阅的签约数据周期性注册定时器", "发生变更", "", []]], "AMF 会 收到 UDM 的 变更 通知": [["AMF", "收到", "UDM的变更通知", []], ["AMF", "收到", "UDM的变更通知", []]], "14d": [], "如果 UDM 存储 了 UE 接入 类型 与 新 AMF 之间 的 关联 信息": [["UDM", "存储", "UE接入类型与新AMF之间的关联信息", []], ["UDM", "存储", "UE接入类型与新AMF之间的关联信息", []]], "UDM 会 发送 NudmUECMDereqistrationNotification 给 老侧 AMF": [["UDM", "发送", "NudmUECMDereqistrationNotification", []], ["UDM", "给", "老侧AMF", []]], "通知 老侧 AMF 删除 UE 上下文 . 如果 UDM 指示 的 服务 ME 删除 原因 是 初始 注册": [["", "通知", "老侧AMF", []], ["", "删除", "UE上下文", []], ["UDM指示的服务ME删除原因", "是", "初始注册", []]], "AMF 调用 所有 相关 SMF 的 NsmfPDUSessionReLeaseSMContext 服务 操作": [], "通知 SMFUE 已经 在 老侧 AMF 上去 注册": [], "SMF 收到 通知 后": [], "将 释放 PDU 会话": [], "14e": [], "老侧 AMF 通过 发起 NudmSDMunsubscribe 取消 UDM 签约 数据 的 订阅": [], "如果 AMF 决定 与 PCF 建立 策略 联系": [], "例如 当 AMF 还 没有 获取 到 UE 的 接入 和 移动性 策略 或者 AMF 没有 合法 的 接入 和 移动性 策略 场景 下": [], "AMF 会 选择 PCF": [], "如果 AMF 从 老侧 的 AMF 中 获取 了 PCFID": [], "则 可以 直接 定位 到 PCF": [], "如果 定位 不到 或者 没有 获取 到 PCFID": [], "则 AMF 会 经过 NRF 选择 一个 新 PCF": [], "选择 好 PCF 后": [], "AMF 向 PCF 发送 NpcfAMPoLicyControLCreateRequest 消息 建立 AM （ AccessManagement ） 策略 控制 关联": [], "并 携带 supi": [], "notificationUri": [], "suppFeat 等 信息": [], "PCF 根据 AMF 上报 的 消息 中 携带 的 信息 和 用户 的 签约 数据 作出 策略 判断": [], "生成 对应 的 AM 策略 关联": [], "通过 NpcfAMPoLicyControLClreateResponse 消息 发送给 AMF": [], "如果 老侧 AMF 之前 发起 了 与 PCF 的 策略 联系": [], "此时 老侧 AMF 给 PCF 发送 NpcfAMPoLicyControLDeLeteRequest 消息": [], "请求 删除 老侧 AMF 与 PCF 之间 的 连接": [], "PCF 向 AMF 发送 NpcfAMPoLicyControLDeLeteResponse 消息 确认 AM 策略 控制 关联 已 删除": [], "AMF 向 UE 发送 RegistrationAccept": [], "通知 UE 注册 请求 已 被 接受": [], "消息 中 包含 AMF 分配 的 5GGUTI 、 TAList 等": [], "新 AMF 给 PCF 发送 NpcfUEPoLicyControlCreateRequest 消息": [], "请求 建立 UE 策略 关联": [], "notificationUrisuppFeat 等 信息": [], "生成 对应 的 UE 策略 关联": [], "通过 NpcfUEPoLicyControLCrreateResponse 消息 发送给 AMF": [], "当 注册 流程 中": [], "AMF 有 分配 新 的 5GGUTI 给 UE 时": [], "UE 发送 RegistrationComplete 消息 给 AMF": [], "UE 发送 ANMessage （ 包括 AN 参数 和 ReqistrationRequest 消息 ） 给 （ R ） AN": [], "其中 ReqistrationRequest 消息 中 Reqistrationtype 为 mobilityreqistrationupdating": [], "指示 UE 需要 进行 移动 注册 更新 （ 如": [], "UE 处于 RMREGISTERED 状态": [], "由于 移动性 或 UE 需要 更新 自身 的 能力 或 协议 参数": [], "发起 注册 流程": [], "）": [], "在 注册 请求 消息 中": [], "UE 会 携带 待 激活 PDU 会话 列表 包含 待 激活 的 PDU 会话": [], "如果 在 （ R ） AN 未 携带 5GSTMSIorGUAMI": [], "或者 携带 的 5GSTMSIorGUAMI 不能 指示 一个 合法 的 AMF 时": [], "（ R ） AN 根据 RAT 和 请求 的 网络 切片 标识 （ NSSAI ） 选择 AMF ・ 如果 UE 是 连接 态时": [], "如果 （ R ） 不能 选择 合适 的 AMF": [], "则 将 注册 请求 转发给 （ R ） AN 中 已 配置 的 defauLtAMF 进行 AMF 选择": [], "RegistrationRequest ） 转发给 AMF 消息 中 包括 N2 参数 、 注册 消息 、 UE 的 接入 选择 和 PDU 会话 选择 信息 以及 UE 上下文 请求": [], "新侧 AMF 给 老侧 AMF 回复 NamfCommunicationReqistrationCompleteNotify 消息": [], "如果 新侧 AMF 从 UE 和 老侧 AMF 的 上下文 中 都 没有 获取 到 PEI": [], "而 根据 AMF 本地 策略 需要 新侧 AMF 给 UE 发送 IdentityRequest": [], "则 新侧 AMF 给 UE 发送 IdentityRequest 消息 获取 PET": [], "12a ~ 12c": [], "并 通过 NudmSDMGet 获取 签约 数据": [], "AMF 向 UDM 发送 NudnSDMSubscribe 订阅 签约 数据 变更 通知 服务": [], "当 订阅 的 签约 数据 发生 变更 时": [], "12d": [], "UDM 会 发送 NudmUECMDeregistrationNotification 给 老侧 AMF": [], "通知 老侧 AMF 删除 UE 上下文": [], "并 通过 NsmfPDUSessionReLeaseSMContext 服务 操作 给 SMF": [], "12e": [], "则 AMF 会 选择 一个 新 PCF": [], "选择 周期性 注册 定时器 好 PCF 后": [], "AMF 向 PCF 发送 NpcfAMPoLicyControLCreateRequest 消息": [], "建立 AM （ AccessManagement ） 策略 控制 关联": [], "notificationuri": [], "通过 NpcfAMPoLicyControLCreateResponse 消息 发送给 AMF": [], "若 在 注册 请求 消息 中 包含 需要 被 激活 的 PDU 会话": [], "AMF 给 SMF 发送 NsmfPDUSessionUpdateSMContextRequest 消息": [], "激活 POU 会话 的 用户 面 连接": [], "若 PDU 会话 状态 指示 它 在 UE 已经 被 释放": [], "则 AMF 通知 SMF 释放 POU 会话 相关 网络资源": [], "若 SMF 订阅 了 UE 相关 的 移动性 事件 通知": [], "AMF 根据 需要 向 SMF 发送 通知": [], "PCF 向 AMF 发送 NpcfAMPoLicyControLDeleteResponse 消息 确认 AM 策略 控制 关联 已 删除": [], "通知 UE 注册 请求 被 接受": [], "消息 中 包含 分配 的 5GGUTI 、 TAList 等": [], "新 AMF 给 PCF 发送 NpcfUEPoLicyControLCreateRequest 消息": [], "通过 NpcfUEPoLicyControlCreateResponse 消息 发送给 AMF": [], "新 的 5GGUTI 被 分配 时": [], "UE 发送 RegistrationCompLete 消息 给 AMF": [], "广": [], "UE 发送 ANMessage （ 包括 AN 参数 和 RegistrationRequest 消息 ） 给 （ R ） AN": [], "其中 RegistrationRequest 消息 中 Reqistrationtype 为 periodicreqistrationupdating": [], "指示 UE 需要 由于 周期性 注册 更新 定时器 超时 而 发起 注册 流程": [], "（ R ） AN 根据 RAT 和 请求 的 网络 切片 标识 （ NSSAI ） 选择 AMF 如果 UE 是 连接 态时": [], "则 将 注册 请求 转发给 （ R ） AN 中 已 配置 的 AMF 进行 AMF 选择": [], "AMF 向 UE 发送 ReqistrationAccept": [], "消息 中 包含 LADN （ LocalAreaDataNetwork ） 信息 、 网络 切片 签约 变更 指示 以及 MICO 模式 等": [], "在 收到 一个 网络 切片 签约 改变 标识 后": [], "UE 成功 更新 自己 时": [], "或者 新 的 5GGUTI 被 分配 时": [], "UE 发起 注册 请求": [], "（ R ） AM 侧 选择 了 一个 初始 AMF": [], "并 向 初始 AMF 发送 注册 请求 消息": [], "如果 是 InterAMF 注册 流程": [], "初始 AMF 从原 AMF 侧 获取 用户 签约 数据 等 用户 上下文": [], "如果 未能 从 老侧 获取 到 UE 的 签约 数据": [], "初始 AMF 会 继续 尝试 从 UDM 获取 用户 签约 数据": [], "AMF 调用 NudmSDMGet 向 UDM 请求 UE 的 切片 选择 签约 数据": [], "AMF 获得 包括 SNSSAI 的 切片 选择 签约 数据": [], "初始 AMF 根据 RequestedNSSAI 和 subcribedNSSAI 发现 自身 切片 类型 不 支持 UE 接入": [], "向 NSSF 查询 满足 UE 当前 网络 切片 类型 的 AMF": [], "初始 AMF 调用 NnssfNSSeLectionGet 服务 并 将 RequestedNSSAI 、 SbuscnibedSNSSAI 、 PLMN 、 TAI 等 信息 发送给 NSSF 用于 查询 满足 UE 当前 网络 切片 类型 的 AMF": [], "NSSF 根据 接收 到 的 信息 及 本地 配置": [], "选出 可以 为 UE 服务 的 AMFSet 或 候选 AMF 列表 以及 适用 于 此次 接入 的 ALLowedNSSAI": [], "如果 当前 流程 是 InterAMF 注册 流程": [], "初始 AMF 发送 一个 拒绝 指示 到 老侧 AMF 告知 在 初胎 AMF 中 当前 UE 的 注册 流程 未 完成": [], "老侧 AMF 收到 该 指示 后 会 继续 保存 UE 上下 以便 目标 AMF 获取": [], "初始 AMF 查询 NRF 获取 目标 AMF 的 权重 和 地址 等 信息": [], "如果 初始 AMF 的 SetID 不 在 NSSF 返回 的 AMFSet 内": [], "则 初始 AMF 根据 本地 重定向 优先级 策略 可以 向 NRF 请求 发现 可用 AMF 列表": [], "包括 AMFPoniter 和 地址 信息 ； 如果 初始 AMF 不 在 NSSF 返回 的 候选 AMF 列表 内": [], "则 初始 AMF 向 WRF 请求 发现 候该 AMF 的 信息": [], "初始 AMF 根据 权重 或者 本地 策略 从中 选择 一个 作为 目标 AMF": [], "初始 AMF 根据 本地 配置 将 NAS 消息 转发 到 目标 AMF": [], "有 以下 两种 转发 方式": [], "如果 初始 AMF 基于 本地 策略 和 签约 信息 决定 直接 将 NAS 消息 发送给 目标 AMF": [], "则 初始 AMF 将 UE 注册 请求 消息 以及 从 NSSF 获得 的 除了 AMFSet 之外 的 其它 信息 都 发送给 目标 AMF": [], "如果 初始 AMF 基于 本地 策略 和 订阅 信息 决定 经由 （ R ） AN 将 NAS 消息 转发 到 目标 AMF": [], "则 初始 AMF 向 （ R ） AM 发送 重新 路由 NAS 消息": [], "包括 目标 AMF 信息 和 注册 语求 消息": [], "以及 从 NSSF 获得 的 相关 信息": [], "在 接收 到 在 步骤 7a 或 步骤 7b 发送 的 注册 请求 消息 之后": [], "目标 AMF 继续执行 注册 流程 的 相关 步骤": [], "最终 向 UE 发送 注册 接受 消息": [], "消息 中 携带 ALLowedNSSAI": [], "NSSP 等 信息": [], "UE 发送 DeregistrationRequest （ UEoriginating ） 消息 给 AMF": [], "消息 中 携带 5GGUTI": [], "Dereqistrationtype （ 例如 Switchoff ） 和 AccessType": [], "如果 UE 当前 没有 建立 的 PDU 会话": [], "则 无需 执行 步骤 25": [], "即 SMF 不用 释放 PDU 会活 和 相应 的 用户 面 资源": [], "如果 UE 有 PDU 会话": [], "则 AMF 发送 NsmfPDUSessionReleaseSMContextRequest 消息 给 SMF": [], "消息 中 携带 SUPI": [], "PDUSessionONID": [], "通知 SMF 释放 PDU 会话 资源 和 相关 用户 面 资源": [], "SMF 发送 N4 会话 释放 请求 给 UPF 释放 会话 相关 的 所有 隧道 资源 和 上下文": [], "SMF 向 PDU 会话 的 UPF （ s ） 发送 N4SessionReLeaseRequest （ N4 会话 ID ） 消息": [], "UPF （ s ） 将 丢弃 PDU 会话 的 剩余 数据包": [], "释放 所有 与 N4 会话 关联 的 隧道 资源 和 上下文": [], "UPF 回复 N4SessionReLeaseResponse 给 SMF": [], "SMF 回复 NsmfPDUSessionReLeaseSMContextResponse 消息 响应 AMF": [], "SMF 断开 与 PCF 之间 的 联系": [], "如果 该会 话 应用 了 动态 PCC": [], "则 SMF 向 PCF 发送 NpcfSMPoLicyControlDeleteRequest 消息": [], "请求 删除 PDU 会话 相应 的 信息": [], "终止 动态 策略 的 下发": [], "PCF 释放 会话 资源": [], "给 SMF 回 NpcfSMPoLicyControLDeLeteResponse 消息": [], "SMF 断开 与 UDM 之间 的 联系": [], "如果 SMF 处理 的 是 UE 最后 一个 PDU 会话": [], "则 SMF 会 执行 NudmSDMUnsubscribe 取消 订阅 签约 数据 变更 通知 服务": [], "SMF 执行 NudmUECMDereqistration 服务 操作": [], "移除 在 UDM 中 存储 的 PDU 会话 与 SMFID 、 SMF 地址 以及 DNN 之间 的 联系": [], "如果 AMF 与 PCF 存在 联系 并且 UE 不再 注册 到 网络": [], "则 删除 AMF 与 PCF 的 AM 策略 关联 关系": [], "AMF 向 PCF 发送 NpcfAMPoLicyControlDeLeteRequest 消息 请求 删除 与 PCF 的 AM 策略 关联 关系": [], "PCF 向 AMF 发送 NocfAMPoLicyControLDeLeteResponse 消息 确认 AM 策略 控制 关联 已 删除": [], "如果 AMF 与 POF 之间 存在 与 该 UE 相关 的 关联 关系": [], "且 该 UE 在 任何 接入 方式 下 都 不再 注册": [], "则 删除 AMF 与 PCF 的 UE 策略 关系": [], "AMF 向 PCF 发送 NocfUEPoLicyControLDeLeteRequest 消息 请求 删除 与 PCF 的 UE 策略 关系": [], "PCF 向 AMF 发送 NpcfUEPoLicyControLDeLeteResponse 消息 确认 UE 策略 关联 已 删除": [], "AMF 发送 NASmessageDereqistrationAccept 给 UE": [], "该 步骤 可 选": [], "例如 去 注册 类型 是 switchoff": [], "则 不用 发送 该 消息": [], "AMF 发送 N2UEContextReLeaseRequest 到 （ R ） AN": [], "释放 N2 信令 连接": [], "流程 结束": [], "如果 UDM 想 立即 删除 用户注册 上下文 和 PDU 会话": [], "UDM 发送 NudmUECMDereqistrationNotification 消息 给 AMF": [], "消息 中 携带 RemovalReason 、 SUPI 、 AccessType 等 参数": [], "肖息 给 UE": [], "显式 去 注册 是 指 AMF 发送 去 注册 消息 给 UE": [], "如": [], "AMF 收到 消息 后 在 对应 的 接入 网络 中 执行 去 注册 流程": [], "AMf 可发 迅隐式 去 注册 和 思式 去 注册 两种 ； 隐式 去 注册 是 指 AMF 不 发送 去 注册 消果 UE 处于 CMIDLE 态": [], "AMF 先 寻呼 UE": [], "再 发去 注册 请求 消息": [], "AMF 回复 NudmUECMDeRegistrationNotificationAck 消息 给 UDM": [], "AMF 也 通过 NudnSDMUnsubscribe 业务 操作 取消 UDM 签约 数据 变更 通知 的 订阅": [], "如果 存在 建立 的 PDU 会话": [], "则 执行 图 1UE 发起 的 Deregistration 流程 中 的 step2 ~ step": [], "AMF 向 PCF 发送 NpcfAMPoLicyControLDeLeteRequest 消息 请求 删除 与 PCF 的 AM 策略 关联 关系": [], "如果 AMF 与 PCF 之间 存在 与 该 UE 相关 的 关联 关系": [], "且 该 UE 在 任何 推入 方式 下 都 不再 注册": [], "则 删除 AMF 与 POF 的 UE 策略 关系": [], "AMF 向 PCF 发送 NpcfUEPoLicyControlDeLeteRequest 消息 请求 删除 与 PCF 的 UE 策略 关联 关系": [], "PCF 向 AMF 发送 NpcfUEPolicyControLDeLeteResponse 消息 确认 UE 策略 关联 已 删除": [], "UE 收到 步骤 2 中 AMF 发送 的 去 注册 请求 后": [], "UE 给 AMF 回复 DereqistrationAccept": [], "AMF 给 AN 发送 N2UECONTEXTRELEASECOMMAND": [], "释放 N2 信令 连": []}